{"version":3,"file":"pdcertificate.min.js","sources":["../src/pdcertificate.js"],"sourcesContent":["/*\n *\n */\n// jshint unused:false, undef:false\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var pdcertificate = {\n\n        init: function() {\n            $('.pdcertificate-select-all').bind('click', this.select_all);\n            $('.pdcertificate-select-none').bind('click', this.unselect_all);\n            $('.pdcertificate-sel').bind('click', this.toggle_one);\n            $('.pdcertificate-time-override').bind('change', this.send_time_override);\n\n            log.debug(\"AMD PDCertificate initialized 2021100800.001\");\n        },\n\n        select_all: function(e) {\n            e.stopPropagation();\n            $('.pdcertificate-sel').attr('checked', true);\n            $('#id-pdcertificate-select-action').prop('disabled', null);\n            return false;\n        },\n\n        unselect_all: function(e) {\n            e.stopPropagation();\n            $('.pdcertificate-sel').attr('checked', null);\n            $('#id-pdcertificate-select-action').prop('disabled', 'disabled');\n            return false;\n        },\n\n        // enable the action list only if at least one is selected.\n        toggle_one: function(e) {\n            e.stopPropagation();\n            var that = $(this);\n            if (that.prop('checked')) {\n                $('#id-pdcertificate-select-action').prop('disabled', null);\n            } else {\n                $('#id-pdcertificate-select-action').prop('disabled', 'disabled');\n            }\n        },\n\n        send_time_override: function(e) {\n            e.stopPropagation();\n\n            var that = $(this);\n\n            // Todo : send Ajax service to regisqter the time override value.\n            var url = cfg.wwwroot + '/mod/pdcertificate/ajax/service.php';\n            url += '?iid=' + that.attr('data-iid');\n            url += '&what=overridetime';\n            url += '&to=' + that.val();\n            url += '&sesskey=' + cfg.sesskey;\n\n            $.get(url, function(data) {\n            \tlog.debug(\"Returned \" + data);\n                // just toggle quickly color to tell we are done.\n                $('#id-timeoverride-' + data).css('background-color: #008000; color: white');\n                $.delay(500);\n                $('#id-timeoverride-' + data).css('background-color: initial; color: initial');\n            }, 'html');\n\n            return false;\n        }\n    };\n\n    return pdcertificate;\n});\n"],"names":["define","$","log","cfg","init","bind","this","select_all","unselect_all","toggle_one","send_time_override","debug","e","stopPropagation","attr","prop","that","url","wwwroot","val","sesskey","get","data","css","delay"],"mappings":"AAKAA,yCAAO,CAAC,SAAU,WAAY,gBAAgB,SAASC,EAAGC,IAAKC,WAEvC,CAEhBC,KAAM,WACFH,EAAE,6BAA6BI,KAAK,QAASC,KAAKC,YAClDN,EAAE,8BAA8BI,KAAK,QAASC,KAAKE,cACnDP,EAAE,sBAAsBI,KAAK,QAASC,KAAKG,YAC3CR,EAAE,gCAAgCI,KAAK,SAAUC,KAAKI,oBAEtDR,IAAIS,MAAM,iDAGdJ,WAAY,SAASK,UACjBA,EAAEC,kBACFZ,EAAE,sBAAsBa,KAAK,WAAW,GACxCb,EAAE,mCAAmCc,KAAK,WAAY,OAC/C,GAGXP,aAAc,SAASI,UACnBA,EAAEC,kBACFZ,EAAE,sBAAsBa,KAAK,UAAW,MACxCb,EAAE,mCAAmCc,KAAK,WAAY,aAC/C,GAIXN,WAAY,SAASG,GACjBA,EAAEC,kBACSZ,EAAEK,MACJS,KAAK,WACVd,EAAE,mCAAmCc,KAAK,WAAY,MAEtDd,EAAE,mCAAmCc,KAAK,WAAY,aAI9DL,mBAAoB,SAASE,GACzBA,EAAEC,sBAEEG,KAAOf,EAAEK,MAGTW,IAAMd,IAAIe,QAAU,6CACxBD,KAAO,QAAUD,KAAKF,KAAK,YAC3BG,KAAO,qBACPA,KAAO,OAASD,KAAKG,MACrBF,KAAO,YAAcd,IAAIiB,QAEzBnB,EAAEoB,IAAIJ,KAAK,SAASK,MACnBpB,IAAIS,MAAM,YAAcW,MAErBrB,EAAE,oBAAsBqB,MAAMC,IAAI,2CAClCtB,EAAEuB,MAAM,KACRvB,EAAE,oBAAsBqB,MAAMC,IAAI,+CACnC,SAEI,GAKlB"}