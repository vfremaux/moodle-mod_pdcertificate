{"version":3,"sources":["../src/pdcertificate.js"],"names":["define","$","log","cfg","init","bind","select_all","unselect_all","toggle_one","send_time_override","debug","e","stopPropagation","attr","prop","that","url","wwwroot","val","sesskey","get","data","css","delay"],"mappings":"AAKAA,OAAM,mCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,aAAvB,CAAD,CAAwC,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsB,CA8DhE,MA5DoB,CAEhBC,IAAI,CAAE,eAAW,CACbH,CAAC,CAAC,2BAAD,CAAD,CAA+BI,IAA/B,CAAoC,OAApC,CAA6C,KAAKC,UAAlD,EACAL,CAAC,CAAC,4BAAD,CAAD,CAAgCI,IAAhC,CAAqC,OAArC,CAA8C,KAAKE,YAAnD,EACAN,CAAC,CAAC,oBAAD,CAAD,CAAwBI,IAAxB,CAA6B,OAA7B,CAAsC,KAAKG,UAA3C,EACAP,CAAC,CAAC,8BAAD,CAAD,CAAkCI,IAAlC,CAAuC,QAAvC,CAAiD,KAAKI,kBAAtD,EAEAP,CAAG,CAACQ,KAAJ,CAAU,8CAAV,CACH,CATe,CAWhBJ,UAAU,CAAE,oBAASK,CAAT,CAAY,CACpBA,CAAC,CAACC,eAAF,GACAX,CAAC,CAAC,oBAAD,CAAD,CAAwBY,IAAxB,CAA6B,SAA7B,KACAZ,CAAC,CAAC,iCAAD,CAAD,CAAqCa,IAArC,CAA0C,UAA1C,CAAsD,IAAtD,EACA,QACH,CAhBe,CAkBhBP,YAAY,CAAE,sBAASI,CAAT,CAAY,CACtBA,CAAC,CAACC,eAAF,GACAX,CAAC,CAAC,oBAAD,CAAD,CAAwBY,IAAxB,CAA6B,SAA7B,CAAwC,IAAxC,EACAZ,CAAC,CAAC,iCAAD,CAAD,CAAqCa,IAArC,CAA0C,UAA1C,CAAsD,UAAtD,EACA,QACH,CAvBe,CA0BhBN,UAAU,CAAE,oBAASG,CAAT,CAAY,CACpBA,CAAC,CAACC,eAAF,GACA,GAAIG,CAAAA,CAAI,CAAGd,CAAC,CAAC,IAAD,CAAZ,CACA,GAAIc,CAAI,CAACD,IAAL,CAAU,SAAV,CAAJ,CAA0B,CACtBb,CAAC,CAAC,iCAAD,CAAD,CAAqCa,IAArC,CAA0C,UAA1C,CAAsD,IAAtD,CACH,CAFD,IAEO,CACHb,CAAC,CAAC,iCAAD,CAAD,CAAqCa,IAArC,CAA0C,UAA1C,CAAsD,UAAtD,CACH,CACJ,CAlCe,CAoChBL,kBAAkB,CAAE,4BAASE,CAAT,CAAY,CAC5BA,CAAC,CAACC,eAAF,GAD4B,GAGxBG,CAAAA,CAAI,CAAGd,CAAC,CAAC,IAAD,CAHgB,CAMxBe,CAAG,CAAGb,CAAG,CAACc,OAAJ,CAAc,qCANI,CAO5BD,CAAG,EAAI,QAAUD,CAAI,CAACF,IAAL,CAAU,UAAV,CAAjB,CACAG,CAAG,EAAI,oBAAP,CACAA,CAAG,EAAI,OAASD,CAAI,CAACG,GAAL,EAAhB,CACAF,CAAG,EAAI,YAAcb,CAAG,CAACgB,OAAzB,CAEAlB,CAAC,CAACmB,GAAF,CAAMJ,CAAN,CAAW,SAASK,CAAT,CAAe,CACzBnB,CAAG,CAACQ,KAAJ,CAAU,YAAcW,CAAxB,EAEGpB,CAAC,CAAC,oBAAsBoB,CAAvB,CAAD,CAA8BC,GAA9B,CAAkC,yCAAlC,EACArB,CAAC,CAACsB,KAAF,CAAQ,GAAR,EACAtB,CAAC,CAAC,oBAAsBoB,CAAvB,CAAD,CAA8BC,GAA9B,CAAkC,2CAAlC,CACH,CAND,CAMG,MANH,EAQA,QACH,CAzDe,CA6DvB,CA/DK,CAAN","sourcesContent":["/*\n *\n */\n// jshint unused:false, undef:false\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var pdcertificate = {\n\n        init: function() {\n            $('.pdcertificate-select-all').bind('click', this.select_all);\n            $('.pdcertificate-select-none').bind('click', this.unselect_all);\n            $('.pdcertificate-sel').bind('click', this.toggle_one);\n            $('.pdcertificate-time-override').bind('change', this.send_time_override);\n\n            log.debug(\"AMD PDCertificate initialized 2021100800.001\");\n        },\n\n        select_all: function(e) {\n            e.stopPropagation();\n            $('.pdcertificate-sel').attr('checked', true);\n            $('#id-pdcertificate-select-action').prop('disabled', null);\n            return false;\n        },\n\n        unselect_all: function(e) {\n            e.stopPropagation();\n            $('.pdcertificate-sel').attr('checked', null);\n            $('#id-pdcertificate-select-action').prop('disabled', 'disabled');\n            return false;\n        },\n\n        // enable the action list only if at least one is selected.\n        toggle_one: function(e) {\n            e.stopPropagation();\n            var that = $(this);\n            if (that.prop('checked')) {\n                $('#id-pdcertificate-select-action').prop('disabled', null);\n            } else {\n                $('#id-pdcertificate-select-action').prop('disabled', 'disabled');\n            }\n        },\n\n        send_time_override: function(e) {\n            e.stopPropagation();\n\n            var that = $(this);\n\n            // Todo : send Ajax service to regisqter the time override value.\n            var url = cfg.wwwroot + '/mod/pdcertificate/ajax/service.php';\n            url += '?iid=' + that.attr('data-iid');\n            url += '&what=overridetime';\n            url += '&to=' + that.val();\n            url += '&sesskey=' + cfg.sesskey;\n\n            $.get(url, function(data) {\n            \tlog.debug(\"Returned \" + data);\n                // just toggle quickly color to tell we are done.\n                $('#id-timeoverride-' + data).css('background-color: #008000; color: white');\n                $.delay(500);\n                $('#id-timeoverride-' + data).css('background-color: initial; color: initial');\n            }, 'html');\n\n            return false;\n        }\n    };\n\n    return pdcertificate;\n});\n"],"file":"pdcertificate.min.js"}